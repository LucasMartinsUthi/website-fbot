---
import type { NavItemDropdown } from '~/types';

interface Props extends NavItemDropdown {}

const { title, items } = Astro.props;


---
<li>
    <div class="relative inline-block">
        <button id="dropdown-button">{title}</button>
        <div class="dropdown-options bg-gray-900 absolute hidden drop-shadow-sm p-2 flex-col">
            {items.map(({title, url}) =>
                <a class="p-2 hover:bg-black hover:text-white" href={url}>{title}</a>
            )}
        </div>
    </div>
</li>

<script>
    const dropdownButton = document.querySelector("#dropdown-button");
    const items = document.querySelector('.dropdown-options');

    const toggleDropdown = () => {
        if (!items) return;
        
        if (items.classList.contains('hidden')) {
            items.classList.remove('hidden');
            items.classList.add('flex');
        } else {
            items.classList.add('hidden');
            items.classList.remove('flex');
        }
    }

    if (dropdownButton) {
        dropdownButton.addEventListener('click', toggleDropdown);
        dropdownButton.addEventListener('hover', toggleDropdown);
    }
</script>