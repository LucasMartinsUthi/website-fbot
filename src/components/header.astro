---
import { Icon } from "astro-icon";
import ThemeSwitcher from "~/components/theme-switcher.astro";
import type { NavItem } from "~/types";

const navItems: Array<NavItem> = [
  { title: "About Us", url: "#about-us" },
  { title: "Teams", url: "butiabots" },
  { title: "Blog", url: "#blog"},
  { title: "Partners", url: "#partners"},
  { title: "Contact", url: "#contact" },
];
---
<!-- .fixed-header {
  @apply fixed top-0 bottom-auto;
  @apply border-default bg-default text-default;
} -->
<header id="page-header" class="fixed-header fixed top-0 bottom-auto z-20 flex w-full items-center justify-between border-b border-transparent px-8 py-4 bg-default text-default">
	<a class="flex items-center gap-3 hover:!text-default" href="#">
		<h1 class="sr-only">FBOT</h1>
		<Icon name="logomark" class="h-10" />
		<Icon name="wordmark" class="hidden h-4 sm:block" />
	</a>
	<div>
		<div class="flex items-center gap-6">
			<nav class="hidden sm:block">
				<ul class="flex items-center gap-6">
				{
					navItems.map(({ title, url }) => (
					<li>
						<a class="text-sm" href={url}>
						{title}
						</a>
					</li>
					))
				}
				</ul>
			</nav>
			
			<button
				id="open-nav-button"
				type="button"
				class="btn sm:hidden"
				aria-label="Navigation"
			>
				<Icon pack="mdi" name="menu" class="h-8" />
			</button>

			<ThemeSwitcher />
		</div>

		<div id="menu-modal" class="modal hidden" aria-hidden="true">
			<div class="fixed inset-0 bg-default px-8 py-4 text-default">
				<div class="space-y-4" role="dialog" aria-modal="true">
				<header class="text-right">
					<button
						id="close-nav-button"
						type="button"
						class="btn"
						aria-label="Close navigation"
					>
						<Icon pack="mdi" name="close" class="h-8" />
					</button>
				</header>
				<div class="flex justify-center">
					<Icon name="logomark" class="h-16" />
				</div>
				<nav>
					<ul class="flex flex-col">
					{
						navItems.map(({ title, url }) => (
						<li>
							<a class="block py-4 text-center text-xl" href={url}>
							{title}
							</a>
						</li>
						))
					}
					</ul>
				</nav>
				</div>
			</div>
		</div>
	</div>
</header>

<script>
	import MicroModal from "micromodal";
	import invariant from "tiny-invariant";
  
	const menuModalId = "menu-modal";
  
	const menu = document.querySelector(`#${menuModalId} ul`);
	const openNavButton = document.querySelector("#open-nav-button");
	const closeNavButton = document.querySelector("#close-nav-button");

	invariant(menu, "Menu element not found");
	invariant(openNavButton, "Open navigation button not found");
	invariant(closeNavButton, "Close navigation button not found");
  
	const openMenu = () => {
	  	MicroModal.show(menuModalId, { disableScroll: true });
	};
  
	const closeMenu = () => {
	  	MicroModal.close(menuModalId);
	};
  
	openNavButton.addEventListener("click", openMenu);
	closeNavButton.addEventListener("click", closeMenu);
  
	menu.addEventListener("click", (event) => {
		if ((event.target as HTMLElement).tagName === "A") {
			closeMenu();
		}
	});
</script>

<noscript>
  <style>
    #open-nav-button {
      display: none;
    }
  </style>
</noscript>
